{"ast":null,"code":"var _jsxFileName = \"/Users/gilliannieh/exibit-curator/client/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport './App.css';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport Navigation from './components/Navigation';\nimport LoadingScreen from './components/LoadingScreen';\nimport ExhibitSelector from './components/ExhibitSelector';\nimport MyExhibits from './pages/MyExhibits';\nimport { ExhibitProvider } from './context/ExhibitContext';\nimport { determinePeriod, getImageUrl, delay, fallbackArtworkData, fallbackPeriods } from './scripts/utils';\n\n/* ---------- Portal wrapper to avoid clipping ---------- */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SelectorPortal({\n  anchorRect,\n  children,\n  onClose,\n  width = 320,\n  offset = 8\n}) {\n  _s();\n  const [pos, setPos] = useState({\n    top: 0,\n    left: 0\n  });\n\n  // Compute a safe position within viewport\n  const computePos = useCallback(() => {\n    if (!anchorRect) return;\n    const vw = window.innerWidth;\n    const vh = window.innerHeight;\n\n    // Prefer right-align to the anchor, but clamp inside viewport\n    let left = Math.min(anchorRect.right - width, vw - width - 16);\n    left = Math.max(16, left);\n    let top = anchorRect.bottom + offset;\n    // If near bottom, pop upward\n    if (top + 360 > vh) {\n      top = Math.max(16, anchorRect.top - offset - 360); // 360 = heuristic height\n    }\n    setPos({\n      top,\n      left\n    });\n  }, [anchorRect, width, offset]);\n  useEffect(() => {\n    computePos();\n  }, [computePos]);\n\n  // Close on Escape / click outside\n  useEffect(() => {\n    function onKey(e) {\n      if (e.key === 'Escape') onClose === null || onClose === void 0 ? void 0 : onClose();\n    }\n    function onClick(e) {\n      // If click happens outside the portal node, close it.\n      // We rely on capture phase: if portal exists, we close on any body click.\n      // Consumers can stopPropagation inside selector if needed.\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n    }\n    document.addEventListener('keydown', onKey);\n    // Use a short timeout so the opening click doesn't immediately close it\n    const id = setTimeout(() => document.addEventListener('click', onClick, {\n      capture: true\n    }), 0);\n    return () => {\n      document.removeEventListener('keydown', onKey);\n      document.removeEventListener('click', onClick, {\n        capture: true\n      });\n      clearTimeout(id);\n    };\n  }, [onClose]);\n\n  // Reposition on scroll/resize\n  useEffect(() => {\n    function onWin() {\n      computePos();\n    }\n    window.addEventListener('resize', onWin);\n    window.addEventListener('scroll', onWin, true);\n    return () => {\n      window.removeEventListener('resize', onWin);\n      window.removeEventListener('scroll', onWin, true);\n    };\n  }, [computePos]);\n  if (!anchorRect) return null;\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exhibit-selector-portal\",\n    style: {\n      position: 'fixed',\n      top: pos.top,\n      left: pos.left,\n      zIndex: 10000,\n      width\n    },\n    onClick: e => e.stopPropagation() // prevent outside-click handler from closing immediately\n    ,\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this), document.body);\n}\n\n/* --------------------------- Home --------------------------- */\n_s(SelectorPortal, \"ulPOkx6E2RpSe2U/Evhou53Affk=\");\n_c = SelectorPortal;\nfunction Home() {\n  _s2();\n  const [allArtworks, setAllArtworks] = useState([]);\n  const [displayedArtworks, setDisplayedArtworks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  // Selector state\n  const [selectorOpen, setSelectorOpen] = useState(false);\n  const [selectorArtwork, setSelectorArtwork] = useState(null);\n  const [selectorAnchorRect, setSelectorAnchorRect] = useState(null);\n\n  // Filters\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('');\n  const [availablePeriods, setAvailablePeriods] = useState([]);\n  const fetchArtworks = useCallback(async (pageNum = 1, searchQuery = '', append = false) => {\n    try {\n      var _data$data;\n      let url = `https://api.artic.edu/api/v1/artworks/search?query[term][is_public_domain]=true&limit=12&from=${(pageNum - 1) * 12}&fields=id,title,artist_display,date_display,image_id,style_titles,classification_titles,date_start,date_end`;\n      if (searchQuery) url += `&q=${encodeURIComponent(searchQuery)}`;\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Failed to fetch artworks');\n      const data = await response.json();\n      const processedArtworks = ((_data$data = data === null || data === void 0 ? void 0 : data.data) !== null && _data$data !== void 0 ? _data$data : []).filter(a => a.image_id).map(artwork => ({\n        id: artwork.id,\n        title: artwork.title || 'Untitled',\n        artist: artwork.artist_display ? artwork.artist_display.split('\\n')[0] : 'Unknown Artist',\n        year: artwork.date_display || 'Unknown Date',\n        period: determinePeriod(artwork.date_start, artwork.date_end, artwork.style_titles),\n        image_id: artwork.image_id,\n        tags: [...(artwork.style_titles ? artwork.style_titles.slice(0, 1) : []), ...(artwork.classification_titles ? artwork.classification_titles.slice(0, 1) : [])].filter(Boolean).slice(0, 2)\n      }));\n      if (append) {\n        setAllArtworks(prev => {\n          const merged = [...prev, ...processedArtworks];\n          // Keep periods list fresh as new pages load\n          const periods = [...new Set(merged.map(a => a.period))].filter(Boolean).sort();\n          setAvailablePeriods(periods.length ? periods : fallbackPeriods);\n          return merged;\n        });\n      } else {\n        setAllArtworks(processedArtworks);\n        const periods = [...new Set(processedArtworks.map(a => a.period))].filter(Boolean).sort();\n        setAvailablePeriods(periods.length ? periods : fallbackPeriods);\n      }\n      setHasMore(processedArtworks.length === 12);\n    } catch (err) {\n      console.error('API Error:', err);\n      if (!append) {\n        setAllArtworks(fallbackArtworkData);\n        setAvailablePeriods(fallbackPeriods);\n      }\n    }\n  }, []);\n\n  // Derived filtering\n  useEffect(() => {\n    let filtered = allArtworks;\n    const q = searchTerm.trim().toLowerCase();\n    if (q) {\n      filtered = filtered.filter(art => art.title.toLowerCase().includes(q) || art.artist.toLowerCase().includes(q) || (art.period || '').toLowerCase().includes(q));\n    }\n    if (selectedPeriod) {\n      filtered = filtered.filter(a => a.period === selectedPeriod);\n    }\n    setDisplayedArtworks(filtered);\n  }, [allArtworks, searchTerm, selectedPeriod]);\n\n  // Initial load with minimum spinner time for nicer UX\n  useEffect(() => {\n    const load = async () => {\n      setLoading(true);\n      const started = Date.now();\n      const MIN = 4000;\n      try {\n        await fetchArtworks(1);\n      } catch (e) {\n        console.error('Initial load error:', e);\n      } finally {\n        const elapsed = Date.now() - started;\n        if (elapsed < MIN) await delay(MIN - elapsed);\n        setLoading(false);\n      }\n    };\n    load();\n  }, [fetchArtworks]);\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    setLoadingMore(true);\n    const nextPage = page + 1;\n    await fetchArtworks(nextPage, searchTerm, true);\n    setPage(nextPage);\n    setLoadingMore(false);\n  };\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedPeriod('');\n  };\n\n  // Open selector anchored to the clicked button\n  const openSelector = (artwork, e) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    setSelectorArtwork(artwork);\n    setSelectorAnchorRect(rect);\n    setSelectorOpen(true);\n  };\n  const closeSelector = () => {\n    setSelectorOpen(false);\n    setSelectorArtwork(null);\n    setSelectorAnchorRect(null);\n  };\n  const resultsLabel = useMemo(() => {\n    const n = displayedArtworks.length;\n    return `Showing ${n} artwork${n === 1 ? '' : 's'}`;\n  }, [displayedArtworks.length]);\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {\n      currentPage: \"home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"filter-controls\",\n      \"aria-label\": \"Search and filter artworks\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"artwork-search\",\n          className: \"visually-hidden\",\n          children: \"Search artworks by title, artist, or period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"artwork-search\",\n          type: \"text\",\n          placeholder: \"Search by title, artist, or period...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"search-input\",\n          \"aria-describedby\": \"search-help\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"search-help\",\n          className: \"visually-hidden\",\n          children: \"Enter keywords to search through artwork titles, artists, and time periods\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"period-filter\",\n          className: \"visually-hidden\",\n          children: \"Filter by time period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"period-filter\",\n          value: selectedPeriod,\n          onChange: e => setSelectedPeriod(e.target.value),\n          className: \"filter-select\",\n          \"aria-describedby\": \"period-help\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Periods\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), availablePeriods.map(period => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: period,\n            children: period\n          }, period, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"period-help\",\n          className: \"visually-hidden\",\n          children: \"Choose a specific time period to filter artworks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), (searchTerm || selectedPeriod) && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearFilters,\n          className: \"clear-filters-btn\",\n          \"aria-label\": \"Clear all search filters and show all artworks\",\n          children: \"Clear Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results-info\",\n      role: \"status\",\n      \"aria-live\": \"polite\",\n      children: resultsLabel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"gallery\",\n      role: \"main\",\n      \"aria-label\": \"Artwork gallery\",\n      children: displayedArtworks.map(artwork => /*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"artwork-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"artwork-image\",\n          \"aria-hidden\": \"true\",\n          children: [artwork.image_id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: getImageUrl(artwork.image_id),\n              alt: \"\",\n              loading: \"lazy\",\n              onError: e => {\n                var _e$currentTarget$pare;\n                e.currentTarget.classList.add('hidden');\n                const ph = (_e$currentTarget$pare = e.currentTarget.parentElement) === null || _e$currentTarget$pare === void 0 ? void 0 : _e$currentTarget$pare.querySelector('.no-image');\n                if (ph) ph.classList.remove('hidden');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-image hidden\",\n              \"aria-hidden\": \"true\",\n              children: \"No Image Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-image\",\n            children: \"No Image Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bookmark-btn\",\n            onClick: e => openSelector(artwork, e),\n            \"aria-label\": `Add ${artwork.title} to my exhibits`,\n            title: \"Add to My Exhibits\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"artwork-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"artwork-title\",\n            children: artwork.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"artwork-meta\",\n            children: [artwork.artist, \" \\u2022 \", artwork.year]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"artwork-tags\",\n            \"aria-label\": \"Artwork categories\",\n            children: artwork.tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `tag ${tag.toLowerCase().replace(/\\s+/g, '-')}`,\n              children: tag.toUpperCase()\n            }, `${artwork.id}-${tag}-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this)]\n      }, artwork.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this), hasMore && !searchTerm && !selectedPeriod && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"load-more-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadMore,\n        disabled: loadingMore,\n        className: \"load-more-btn\",\n        \"aria-label\": loadingMore ? 'Loading more artworks' : 'Load more artworks',\n        children: loadingMore ? 'Loading...' : 'Load More'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: \"Click to load 12 additional artworks from the Art Institute of Chicago collection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 9\n    }, this), selectorOpen && selectorArtwork && selectorAnchorRect && /*#__PURE__*/_jsxDEV(SelectorPortal, {\n      anchorRect: selectorAnchorRect,\n      onClose: closeSelector,\n      width: 320,\n      children: /*#__PURE__*/_jsxDEV(ExhibitSelector, {\n        artwork: selectorArtwork,\n        onClose: closeSelector\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 5\n  }, this);\n}\n\n/* --------------------------- App --------------------------- */\n_s2(Home, \"qNSnmtRZ0p+d6drBsuI6YhaAO3o=\");\n_c2 = Home;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(ExhibitProvider, {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/my-exhibits\",\n          element: /*#__PURE__*/_jsxDEV(MyExhibits, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n}\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SelectorPortal\");\n$RefreshReg$(_c2, \"Home\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","useState","useEffect","useCallback","useMemo","createPortal","Navigation","LoadingScreen","ExhibitSelector","MyExhibits","ExhibitProvider","determinePeriod","getImageUrl","delay","fallbackArtworkData","fallbackPeriods","jsxDEV","_jsxDEV","Fragment","_Fragment","SelectorPortal","anchorRect","children","onClose","width","offset","_s","pos","setPos","top","left","computePos","vw","window","innerWidth","vh","innerHeight","Math","min","right","max","bottom","onKey","e","key","onClick","document","addEventListener","id","setTimeout","capture","removeEventListener","clearTimeout","onWin","className","style","position","zIndex","stopPropagation","role","fileName","_jsxFileName","lineNumber","columnNumber","body","_c","Home","_s2","allArtworks","setAllArtworks","displayedArtworks","setDisplayedArtworks","loading","setLoading","loadingMore","setLoadingMore","page","setPage","hasMore","setHasMore","selectorOpen","setSelectorOpen","selectorArtwork","setSelectorArtwork","selectorAnchorRect","setSelectorAnchorRect","searchTerm","setSearchTerm","selectedPeriod","setSelectedPeriod","availablePeriods","setAvailablePeriods","fetchArtworks","pageNum","searchQuery","append","_data$data","url","encodeURIComponent","response","fetch","ok","Error","data","json","processedArtworks","filter","a","image_id","map","artwork","title","artist","artist_display","split","year","date_display","period","date_start","date_end","style_titles","tags","slice","classification_titles","Boolean","prev","merged","periods","Set","sort","length","err","console","error","filtered","q","trim","toLowerCase","art","includes","load","started","Date","now","MIN","elapsed","loadMore","nextPage","clearFilters","openSelector","rect","currentTarget","getBoundingClientRect","closeSelector","resultsLabel","n","currentPage","htmlFor","type","placeholder","value","onChange","target","src","alt","onError","_e$currentTarget$pare","classList","add","ph","parentElement","querySelector","remove","tag","index","replace","toUpperCase","disabled","_c2","App","path","element","_c3","$RefreshReg$"],"sources":["/Users/gilliannieh/exibit-curator/client/src/App.js"],"sourcesContent":["import './App.css';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport Navigation from './components/Navigation';\nimport LoadingScreen from './components/LoadingScreen';\nimport ExhibitSelector from './components/ExhibitSelector';\nimport MyExhibits from './pages/MyExhibits';\nimport { ExhibitProvider } from './context/ExhibitContext';\nimport { determinePeriod, getImageUrl, delay, fallbackArtworkData, fallbackPeriods } from './scripts/utils';\n\n/* ---------- Portal wrapper to avoid clipping ---------- */\nfunction SelectorPortal({ anchorRect, children, onClose, width = 320, offset = 8 }) {\n  const [pos, setPos] = useState({ top: 0, left: 0 });\n\n  // Compute a safe position within viewport\n  const computePos = useCallback(() => {\n    if (!anchorRect) return;\n    const vw = window.innerWidth;\n    const vh = window.innerHeight;\n\n    // Prefer right-align to the anchor, but clamp inside viewport\n    let left = Math.min(anchorRect.right - width, vw - width - 16);\n    left = Math.max(16, left);\n\n    let top = anchorRect.bottom + offset;\n    // If near bottom, pop upward\n    if (top + 360 > vh) {\n      top = Math.max(16, anchorRect.top - offset - 360); // 360 = heuristic height\n    }\n\n    setPos({ top, left });\n  }, [anchorRect, width, offset]);\n\n  useEffect(() => {\n    computePos();\n  }, [computePos]);\n\n  // Close on Escape / click outside\n  useEffect(() => {\n    function onKey(e) {\n      if (e.key === 'Escape') onClose?.();\n    }\n    function onClick(e) {\n      // If click happens outside the portal node, close it.\n      // We rely on capture phase: if portal exists, we close on any body click.\n      // Consumers can stopPropagation inside selector if needed.\n      onClose?.();\n    }\n    document.addEventListener('keydown', onKey);\n    // Use a short timeout so the opening click doesn't immediately close it\n    const id = setTimeout(() => document.addEventListener('click', onClick, { capture: true }), 0);\n\n    return () => {\n      document.removeEventListener('keydown', onKey);\n      document.removeEventListener('click', onClick, { capture: true });\n      clearTimeout(id);\n    };\n  }, [onClose]);\n\n  // Reposition on scroll/resize\n  useEffect(() => {\n    function onWin() {\n      computePos();\n    }\n    window.addEventListener('resize', onWin);\n    window.addEventListener('scroll', onWin, true);\n    return () => {\n      window.removeEventListener('resize', onWin);\n      window.removeEventListener('scroll', onWin, true);\n    };\n  }, [computePos]);\n\n  if (!anchorRect) return null;\n\n  return createPortal(\n    <div\n      className=\"exhibit-selector-portal\"\n      style={{\n        position: 'fixed',\n        top: pos.top,\n        left: pos.left,\n        zIndex: 10000,\n        width,\n      }}\n      onClick={(e) => e.stopPropagation()} // prevent outside-click handler from closing immediately\n      role=\"dialog\"\n      aria-modal=\"true\"\n    >\n      {children}\n    </div>,\n    document.body\n  );\n}\n\n/* --------------------------- Home --------------------------- */\nfunction Home() {\n  const [allArtworks, setAllArtworks] = useState([]);\n  const [displayedArtworks, setDisplayedArtworks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  // Selector state\n  const [selectorOpen, setSelectorOpen] = useState(false);\n  const [selectorArtwork, setSelectorArtwork] = useState(null);\n  const [selectorAnchorRect, setSelectorAnchorRect] = useState(null);\n\n  // Filters\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('');\n  const [availablePeriods, setAvailablePeriods] = useState([]);\n\n  const fetchArtworks = useCallback(async (pageNum = 1, searchQuery = '', append = false) => {\n    try {\n      let url = `https://api.artic.edu/api/v1/artworks/search?query[term][is_public_domain]=true&limit=12&from=${(pageNum - 1) * 12}&fields=id,title,artist_display,date_display,image_id,style_titles,classification_titles,date_start,date_end`;\n      if (searchQuery) url += `&q=${encodeURIComponent(searchQuery)}`;\n\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Failed to fetch artworks');\n\n      const data = await response.json();\n\n      const processedArtworks = (data?.data ?? [])\n        .filter((a) => a.image_id)\n        .map((artwork) => ({\n          id: artwork.id,\n          title: artwork.title || 'Untitled',\n          artist: artwork.artist_display ? artwork.artist_display.split('\\n')[0] : 'Unknown Artist',\n          year: artwork.date_display || 'Unknown Date',\n          period: determinePeriod(artwork.date_start, artwork.date_end, artwork.style_titles),\n          image_id: artwork.image_id,\n          tags: [\n            ...(artwork.style_titles ? artwork.style_titles.slice(0, 1) : []),\n            ...(artwork.classification_titles ? artwork.classification_titles.slice(0, 1) : []),\n          ]\n            .filter(Boolean)\n            .slice(0, 2),\n        }));\n\n      if (append) {\n        setAllArtworks((prev) => {\n          const merged = [...prev, ...processedArtworks];\n          // Keep periods list fresh as new pages load\n          const periods = [...new Set(merged.map((a) => a.period))].filter(Boolean).sort();\n          setAvailablePeriods(periods.length ? periods : fallbackPeriods);\n          return merged;\n        });\n      } else {\n        setAllArtworks(processedArtworks);\n        const periods = [...new Set(processedArtworks.map((a) => a.period))].filter(Boolean).sort();\n        setAvailablePeriods(periods.length ? periods : fallbackPeriods);\n      }\n\n      setHasMore(processedArtworks.length === 12);\n    } catch (err) {\n      console.error('API Error:', err);\n      if (!append) {\n        setAllArtworks(fallbackArtworkData);\n        setAvailablePeriods(fallbackPeriods);\n      }\n    }\n  }, []);\n\n  // Derived filtering\n  useEffect(() => {\n    let filtered = allArtworks;\n    const q = searchTerm.trim().toLowerCase();\n\n    if (q) {\n      filtered = filtered.filter(\n        (art) =>\n          art.title.toLowerCase().includes(q) ||\n          art.artist.toLowerCase().includes(q) ||\n          (art.period || '').toLowerCase().includes(q)\n      );\n    }\n    if (selectedPeriod) {\n      filtered = filtered.filter((a) => a.period === selectedPeriod);\n    }\n\n    setDisplayedArtworks(filtered);\n  }, [allArtworks, searchTerm, selectedPeriod]);\n\n  // Initial load with minimum spinner time for nicer UX\n  useEffect(() => {\n    const load = async () => {\n      setLoading(true);\n      const started = Date.now();\n      const MIN = 4000;\n\n      try {\n        await fetchArtworks(1);\n      } catch (e) {\n        console.error('Initial load error:', e);\n      } finally {\n        const elapsed = Date.now() - started;\n        if (elapsed < MIN) await delay(MIN - elapsed);\n        setLoading(false);\n      }\n    };\n    load();\n  }, [fetchArtworks]);\n\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    setLoadingMore(true);\n    const nextPage = page + 1;\n    await fetchArtworks(nextPage, searchTerm, true);\n    setPage(nextPage);\n    setLoadingMore(false);\n  };\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedPeriod('');\n  };\n\n  // Open selector anchored to the clicked button\n  const openSelector = (artwork, e) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    setSelectorArtwork(artwork);\n    setSelectorAnchorRect(rect);\n    setSelectorOpen(true);\n  };\n\n  const closeSelector = () => {\n    setSelectorOpen(false);\n    setSelectorArtwork(null);\n    setSelectorAnchorRect(null);\n  };\n\n  const resultsLabel = useMemo(() => {\n    const n = displayedArtworks.length;\n    return `Showing ${n} artwork${n === 1 ? '' : 's'}`;\n  }, [displayedArtworks.length]);\n\n  if (loading) return <LoadingScreen />;\n\n  return (\n    <div className=\"App\">\n      <Navigation currentPage=\"home\" />\n\n      {/* Filter Controls */}\n      <section className=\"filter-controls\" aria-label=\"Search and filter artworks\">\n        <div className=\"search-bar\">\n          <label htmlFor=\"artwork-search\" className=\"visually-hidden\">\n            Search artworks by title, artist, or period\n          </label>\n          <input\n            id=\"artwork-search\"\n            type=\"text\"\n            placeholder=\"Search by title, artist, or period...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n            aria-describedby=\"search-help\"\n          />\n          <div id=\"search-help\" className=\"visually-hidden\">\n            Enter keywords to search through artwork titles, artists, and time periods\n          </div>\n\n          <label htmlFor=\"period-filter\" className=\"visually-hidden\">\n            Filter by time period\n          </label>\n          <select\n            id=\"period-filter\"\n            value={selectedPeriod}\n            onChange={(e) => setSelectedPeriod(e.target.value)}\n            className=\"filter-select\"\n            aria-describedby=\"period-help\"\n          >\n            <option value=\"\">All Periods</option>\n            {availablePeriods.map((period) => (\n              <option key={period} value={period}>\n                {period}\n              </option>\n            ))}\n          </select>\n          <div id=\"period-help\" className=\"visually-hidden\">\n            Choose a specific time period to filter artworks\n          </div>\n\n          {(searchTerm || selectedPeriod) && (\n            <button\n              onClick={clearFilters}\n              className=\"clear-filters-btn\"\n              aria-label=\"Clear all search filters and show all artworks\"\n            >\n              Clear Filters\n            </button>\n          )}\n        </div>\n      </section>\n\n      {/* Results count */}\n      <div className=\"results-info\" role=\"status\" aria-live=\"polite\">\n        {resultsLabel}\n      </div>\n\n      {/* Gallery */}\n      <main className=\"gallery\" role=\"main\" aria-label=\"Artwork gallery\">\n        {displayedArtworks.map((artwork) => (\n          <article key={artwork.id} className=\"artwork-card\">\n            <div className=\"artwork-image\" aria-hidden=\"true\">\n              {artwork.image_id ? (\n                <>\n                  <img\n                    src={getImageUrl(artwork.image_id)}\n                    alt=\"\"\n                    loading=\"lazy\"\n                    onError={(e) => {\n                      e.currentTarget.classList.add('hidden');\n                      const ph = e.currentTarget.parentElement?.querySelector('.no-image');\n                      if (ph) ph.classList.remove('hidden');\n                    }}\n                  />\n                  <div className=\"no-image hidden\" aria-hidden=\"true\">\n                    No Image Available\n                  </div>\n                </>\n              ) : (\n                <div className=\"no-image\">No Image Available</div>\n              )}\n              <button\n                className=\"bookmark-btn\"\n                onClick={(e) => openSelector(artwork, e)}\n                aria-label={`Add ${artwork.title} to my exhibits`}\n                title=\"Add to My Exhibits\"\n              >\n                +\n              </button>\n            </div>\n\n            <div className=\"artwork-info\">\n              <h3 className=\"artwork-title\">{artwork.title}</h3>\n              <p className=\"artwork-meta\">\n                {artwork.artist} â€¢ {artwork.year}\n              </p>\n              <div className=\"artwork-tags\" aria-label=\"Artwork categories\">\n                {artwork.tags.map((tag, index) => (\n                  <span key={`${artwork.id}-${tag}-${index}`} className={`tag ${tag.toLowerCase().replace(/\\s+/g, '-')}`}>\n                    {tag.toUpperCase()}\n                  </span>\n                ))}\n              </div>\n            </div>\n          </article>\n        ))}\n      </main>\n\n      {/* Load More Button */}\n      {hasMore && !searchTerm && !selectedPeriod && (\n        <div className=\"load-more-container\">\n          <button\n            onClick={loadMore}\n            disabled={loadingMore}\n            className=\"load-more-btn\"\n            aria-label={loadingMore ? 'Loading more artworks' : 'Load more artworks'}\n          >\n            {loadingMore ? 'Loading...' : 'Load More'}\n          </button>\n          <div className=\"visually-hidden\">\n            Click to load 12 additional artworks from the Art Institute of Chicago collection\n          </div>\n        </div>\n      )}\n\n      {/* Selector Portal (renders outside clipping containers) */}\n      {selectorOpen && selectorArtwork && selectorAnchorRect && (\n        <SelectorPortal anchorRect={selectorAnchorRect} onClose={closeSelector} width={320}>\n          <ExhibitSelector artwork={selectorArtwork} onClose={closeSelector} />\n        </SelectorPortal>\n      )}\n    </div>\n  );\n}\n\n/* --------------------------- App --------------------------- */\nfunction App() {\n  return (\n    <ExhibitProvider>\n      <Router>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/my-exhibits\" element={<MyExhibits />} />\n        </Routes>\n      </Router>\n    </ExhibitProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}